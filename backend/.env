# =================================================================================
# Entrepreneurship Booster Platform - Unified Environment Configuration
# Version: 2.0 - Production Ready
# Last Updated: January 2025
# =================================================================================

# -----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# -----------------------------------------------------------------------------
APP_NAME=entrepreneurship-booster-platform
APP_ENV=development
APP_VERSION=1.0.0
TZ=Africa/Kampala

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION (MySQL 8.0)
# -----------------------------------------------------------------------------
DB_HOST=mysql
DB_PORT=3307
DB_NAME=epb_db
DB_USER=epb_user
DB_PASSWORD=Douglas20!
DB_ROOT_PASSWORD=Douglas20!RootPass

# Connection Pool Settings
DB_MAX_POOL_SIZE=20
DB_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# JPA/Hibernate Settings
SPRING_JPA_HIBERNATE_DDL_AUTO=update
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=false

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=EpbRedis2025Secure!
REDIS_DATABASE=0
REDIS_TIMEOUT=2000
REDIS_MAX_ACTIVE=20
REDIS_MAX_IDLE=10
REDIS_MIN_IDLE=5

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION CONFIGURATION
# -----------------------------------------------------------------------------
JWT_SECRET=aVeryLongAndSecureSecretKeyForEntrepreneurshipBoosterPlatformWith256BitsMinimumLength2025
JWT_ACCESS_TOKEN_EXPIRY=900
JWT_REFRESH_TOKEN_EXPIRY=604800
JWT_ISSUER=epb-platform
JWT_AUDIENCE=epb-users

# -----------------------------------------------------------------------------
# SERVICE REGISTRY (EUREKA)
# -----------------------------------------------------------------------------
EUREKA_ENABLED=true
EUREKA_SERVER_URL=http://service-registry:8761/eureka/
EUREKA_INSTANCE_PREFER_IP_ADDRESS=true
EUREKA_INSTANCE_LEASE_RENEWAL_INTERVAL=30
EUREKA_INSTANCE_LEASE_EXPIRATION_DURATION=90

# -----------------------------------------------------------------------------
# SERVICE PORTS CONFIGURATION
# -----------------------------------------------------------------------------
SERVICE_REGISTRY_PORT=8761
API_GATEWAY_PORT=8080
USER_SERVICE_PORT=8081
AUTH_SERVICE_PORT=8082
OPPORTUNITY_SERVICE_PORT=8083
CONTENT_SERVICE_PORT=8084
MENTOR_SERVICE_PORT=8085
NOTIFICATION_SERVICE_PORT=8086
USSD_SERVICE_PORT=8087
FILE_MANAGEMENT_SERVICE_PORT=8088
AI_RECOMMENDATION_SERVICE_PORT=8089
ANALYTICS_SERVICE_PORT=8090
EDGE_FUNCTIONS_PORT=8091

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=Admin2025Secure!

# Infrastructure
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
MYSQL_EXTERNAL_PORT=3307
REDIS_EXTERNAL_PORT=6379

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://entrepreneurshipbooster.ug,https://admin.entrepreneurshipbooster.ug
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=60
RATE_LIMIT_AUTH_REQUESTS=20
RATE_LIMIT_AUTH_DURATION=60
RATE_LIMIT_UPLOAD_REQUESTS=10
RATE_LIMIT_UPLOAD_DURATION=60

# -----------------------------------------------------------------------------
# AFRICA'S TALKING API (SMS & USSD)
# -----------------------------------------------------------------------------
AFRICAS_TALKING_USERNAME=sandbox
AFRICAS_TALKING_API_KEY=sandbox_api_key_change_in_production
AFRICAS_TALKING_SENDER_ID=EBP
USSD_SHORT_CODE=*256#
AFRICAS_TALKING_ENVIRONMENT=sandbox

# Production Keys (Uncomment for production)
# AFRICAS_TALKING_USERNAME=your_production_username
# AFRICAS_TALKING_API_KEY=your_production_api_key
# AFRICAS_TALKING_ENVIRONMENT=production

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION (SMTP)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=noreply@entrepreneurshipbooster.ug
SMTP_PASSWORD=your_app_specific_password
SMTP_FROM=noreply@entrepreneurshipbooster.ug
SMTP_FROM_NAME=Entrepreneurship Booster Platform

# Email Features
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_REQUIRED=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_SSL_TRUST=smtp.gmail.com

# -----------------------------------------------------------------------------
# FILE STORAGE CONFIGURATION
# -----------------------------------------------------------------------------
STORAGE_TYPE=local
STORAGE_PATH=/app/uploads
FILE_MAX_SIZE=52428800
FILE_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# AWS S3 (For Production)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=epb-files
AWS_S3_REGION=us-east-1
AWS_CLOUDFRONT_URL=https://cdn.entrepreneurshipbooster.ug

# -----------------------------------------------------------------------------
# OPENAI API (AI Features)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-demo-key-change-in-production
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_PATH=./logs
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=30
LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Service-specific log levels
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_EPB=DEBUG
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=INFO
LOGGING_LEVEL_ORG_HIBERNATE=WARN

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_PUSH_NOTIFICATIONS=false
FEATURE_USSD_ACCESS=true
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_ANALYTICS=true
FEATURE_CACHE_ENABLED=true
FEATURE_RATE_LIMIT_ENABLED=true
FEATURE_AUDIT_ENABLED=true
FEATURE_FILE_UPLOADS=true
FEATURE_MENTORSHIP=true
FEATURE_COMMUNITY_FEED=true

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
# Account Security
SECURITY_ACCOUNT_LOCKOUT_ENABLED=true
SECURITY_ACCOUNT_LOCKOUT_ATTEMPTS=5
SECURITY_ACCOUNT_LOCKOUT_DURATION=1800

# Password Policy
SECURITY_PASSWORD_MIN_LENGTH=8
SECURITY_PASSWORD_REQUIRE_UPPERCASE=true
SECURITY_PASSWORD_REQUIRE_LOWERCASE=true
SECURITY_PASSWORD_REQUIRE_DIGIT=true
SECURITY_PASSWORD_REQUIRE_SPECIAL=true

# Session Management
SECURITY_SESSION_TIMEOUT=3600
SECURITY_CONCURRENT_SESSIONS=3
SECURITY_SESSION_INVALIDATE_ON_LOGOUT=true

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# -----------------------------------------------------------------------------
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when_authorized
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# Health Check
MANAGEMENT_HEALTH_DISKSPACE_ENABLED=true
MANAGEMENT_HEALTH_DB_ENABLED=true
MANAGEMENT_HEALTH_REDIS_ENABLED=true

# -----------------------------------------------------------------------------
# CACHE CONFIGURATION
# -----------------------------------------------------------------------------
CACHE_TYPE=redis
CACHE_REDIS_TIME_TO_LIVE=3600
CACHE_CACHE_NAMES=userProfiles,authData,opportunities,profilePictures,searchResults

# Caffeine (Local Cache)
SPRING_CACHE_CAFFEINE_SPEC=maximumSize=10000,expireAfterWrite=600s

# -----------------------------------------------------------------------------
# ASYNC PROCESSING
# -----------------------------------------------------------------------------
ASYNC_CORE_POOL_SIZE=10
ASYNC_MAX_POOL_SIZE=20
ASYNC_QUEUE_CAPACITY=100
ASYNC_THREAD_NAME_PREFIX=async-

# -----------------------------------------------------------------------------
# CIRCUIT BREAKER (Resilience4j)
# -----------------------------------------------------------------------------
RESILIENCE4J_CIRCUITBREAKER_ENABLED=true
RESILIENCE4J_CIRCUITBREAKER_FAILURE_RATE_THRESHOLD=50
RESILIENCE4J_CIRCUITBREAKER_WAIT_DURATION_IN_OPEN_STATE=10000
RESILIENCE4J_CIRCUITBREAKER_SLIDING_WINDOW_SIZE=10

# -----------------------------------------------------------------------------
# ACTUATOR ENDPOINTS
# -----------------------------------------------------------------------------
MANAGEMENT_SERVER_PORT=9091
MANAGEMENT_ENDPOINTS_WEB_BASE_PATH=/actuator
MANAGEMENT_ENDPOINT_SHUTDOWN_ENABLED=false

# -----------------------------------------------------------------------------
# MULTIPART FILE UPLOAD
# -----------------------------------------------------------------------------
SPRING_SERVLET_MULTIPART_ENABLED=true
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=50MB
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=50MB
SPRING_SERVLET_MULTIPART_FILE_SIZE_THRESHOLD=2KB

# -----------------------------------------------------------------------------
# TIMEZONE & LOCALIZATION
# -----------------------------------------------------------------------------
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_TIME_ZONE=Africa/Kampala
SPRING_JACKSON_TIME_ZONE=Africa/Kampala
SPRING_JACKSON_DATE_FORMAT=yyyy-MM-dd'T'HH:mm:ss.SSSZ

# -----------------------------------------------------------------------------
# DOCKER NETWORK CONFIGURATION
# -----------------------------------------------------------------------------
DOCKER_NETWORK_SUBNET=172.20.0.0/16
MYSQL_IP=172.20.0.10
REDIS_IP=172.20.0.11
SERVICE_REGISTRY_IP=172.20.0.20
API_GATEWAY_IP=172.20.0.21

# -----------------------------------------------------------------------------
# PRODUCTION OVERRIDES (Uncomment for production)
# -----------------------------------------------------------------------------
# APP_ENV=production
# LOG_LEVEL=WARN
# SPRING_JPA_SHOW_SQL=false
# FEATURE_SMS_NOTIFICATIONS=true
# AFRICAS_TALKING_ENVIRONMENT=production
# STORAGE_TYPE=s3
# SECURITY_ACCOUNT_LOCKOUT_ENABLED=true

# =================================================================================
# DEPLOYMENT NOTES
# =================================================================================
#
# BEFORE FIRST RUN:
# 1. Update all passwords and secrets
# 2. Configure Africa's Talking production credentials
# 3. Set up AWS S3 for file storage (production)
# 4. Configure production SMTP credentials
# 5. Update CORS origins with production domains
# 6. Review and adjust rate limits
# 7. Enable SSL certificates for Nginx
#
# SECURITY CHECKLIST:
# ✓ Change default passwords
# ✓ Use strong JWT secret (min 256 bits)
# ✓ Enable HTTPS in production
# ✓ Restrict CORS origins
# ✓ Enable rate limiting
# ✓ Configure firewall rules
# ✓ Enable audit logging
# ✓ Regular security updates
#
# =================================================================================