# application-dev.yml
# =============================================================================
# MENTOR SERVICE - DEVELOPMENT CONFIGURATION (FIXED)
# =============================================================================

spring:
  application:
    name: mentor-service

  # Database Configuration (Development)
  datasource:
    url: jdbc:postgresql://localhost:5432/youthconnect_db?useSSL=false&serverTimezone=Africa/Kampala&allowPublicKeyRetrieval=true
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver

    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      idle-timeout: 300000
      max-lifetime: 1800000
      connection-timeout: 20000

  # JPA Configuration (Development)
  jpa:
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
    hibernate:
      ddl-auto: validate

  # Flyway Configuration
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true

  # Cache Configuration
  cache:
    type: caffeine

# Server Configuration
server:
  port: 8090

# Eureka Client
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
    register-with-eureka: true
    fetch-registry: true

  instance:
    prefer-ip-address: true
    lease-renewal-interval-in-seconds: 30

# Feign Client
feign:
  client:
    config:
      default:
        connect-timeout: 5000
        read-timeout: 10000
      user-service:
        url: http://localhost:8081
      notification-service:
        url: http://localhost:8086

# Logging (Development)
logging:
  level:
    root: INFO
    com.youthconnect.mentor_service: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    feign: DEBUG

  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

# Custom Application Properties
app:
  mentorship:
    default-session-duration: 60
    max-sessions-per-week: 10
    min-session-gap: 30
    reminder-times:
      - 24
      - 1
    auto-cancel-threshold: 24

  reviews:
    min-rating: 1
    max-rating: 5
    moderation-enabled: false  # Disabled in development
    min-comment-length: 10
    max-comment-length: 500

  matching:
    min-match-score: 60
    weights:
      expertise: 0.4
      rating: 0.3
      availability: 0.2
      location: 0.1

  cache:
    ttl:
      mentors: 1800
      sessions: 300
      availability: 600
      reviews: 3600
      statistics: 1800

  features:
    video-calls-enabled: false
    calendar-integration-enabled: false
    ai-matching-enabled: true
    auto-reminders-enabled: true