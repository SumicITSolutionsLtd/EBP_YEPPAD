# ═══════════════════════════════════════════════════════════════════════════
# NOTIFICATION SERVICE - ENVIRONMENT VARIABLES
# ═══════════════════════════════════════════════════════════════════════════
#
# This file contains all required environment variables for the notification service.
#
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your actual credentials (NEVER commit .env to Git)
# 3. Restart the application to load new values
#
# SECURITY:
# - Keep .env file out of version control (add to .gitignore)
# - Use different credentials for dev/staging/production
# - Rotate credentials regularly (every 90 days)
# - Never share credentials in Slack/Email/Chat
#
# Author: Douglas Kings Kato
# Version: 1.0
# Last Updated: 2025-01-20
# ═══════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════
# APPLICATION SETTINGS
# ═══════════════════════════════════════════════════════════════════════════

# Spring Profile (dev, staging, production)
SPRING_PROFILES_ACTIVE=dev

# Application Name
SPRING_APPLICATION_NAME=notification-service

# Server Port
SERVER_PORT=7077

# Application Version
APP_VERSION=1.0.0

# ═══════════════════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION (Postgressql)
# ═══════════════════════════════════════════════════════════════════════════

# Database Connection
DB_HOST=localhost
DB_PORT=3307
DB_NAME=youth_connect_db
DB_USERNAME=root
DB_PASSWORD=your_secure_password_here

# Database URL (auto-constructed, don't change unless needed)
DB_URL=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?useSSL=false&serverTimezone=Africa/Kampala&allowPublicKeyRetrieval=true

# Connection Pool Settings
DB_POOL_SIZE=10
DB_MIN_IDLE=2

# ═══════════════════════════════════════════════════════════════════════════
# REDIS CONFIGURATION (Caching & Session Management)
# ═══════════════════════════════════════════════════════════════════════════

# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# Redis Pool Settings
REDIS_POOL_MAX_ACTIVE=8
REDIS_POOL_MAX_IDLE=8
REDIS_POOL_MIN_IDLE=2

# ═══════════════════════════════════════════════════════════════════════════
# AFRICA'S TALKING API (SMS PROVIDER)
# ═══════════════════════════════════════════════════════════════════════════

# API Credentials
# Get these from: https://account.africastalking.com/apps/sandbox
AFRICAS_TALKING_API_KEY=your_api_key_here
AFRICAS_TALKING_USERNAME=sandbox

# SMS Settings
AFRICAS_TALKING_SENDER_ID=YouthConnect
AFRICAS_TALKING_BASE_URL=https://api.africastalking.com/version1

# Cost per SMS (for logging/analytics)
SMS_COST_UGX=60

# ═══════════════════════════════════════════════════════════════════════════
# EMAIL CONFIGURATION (SMTP)
# ═══════════════════════════════════════════════════════════════════════════

# SMTP Server Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=noreply@kwetuhub.ug
SMTP_PASSWORD=your_app_specific_password_here

# Email Settings
EMAIL_FROM_NAME=Kwetu-Hub Uganda
EMAIL_FROM_ADDRESS=noreply@kwetuhub.ug
EMAIL_REPLY_TO=support@kwetuhub.ug

# SMTP Authentication
SMTP_AUTH=true
SMTP_STARTTLS_ENABLE=true
SMTP_STARTTLS_REQUIRED=true

# Gmail App Password Instructions:
# 1. Go to: https://myaccount.google.com/apppasswords
# 2. Select app: Mail
# 3. Select device: Other (Custom name)
# 4. Generate password
# 5. Use generated password in SMTP_PASSWORD

# ═══════════════════════════════════════════════════════════════════════════
# FIREBASE CONFIGURATION (PUSH NOTIFICATIONS)
# ═══════════════════════════════════════════════════════════════════════════

# Firebase Project Settings
FIREBASE_PROJECT_ID=kwetu-hub-uganda
FIREBASE_SERVICE_ACCOUNT=firebase-service-account.json
FIREBASE_DATABASE_URL=https://kwetu-hub-uganda.firebaseio.com

# Push Notification Settings
PUSH_NOTIFICATION_ENABLED=true
PUSH_HIGH_PRIORITY=true
PUSH_TTL_SECONDS=86400

# Firebase Setup Instructions:
# 1. Go to: https://console.firebase.google.com
# 2. Select project: kwetu-hub-uganda
# 3. Project Settings → Service Accounts
# 4. Generate New Private Key
# 5. Save as: firebase-service-account.json
# 6. Place in: src/main/resources/

# ═══════════════════════════════════════════════════════════════════════════
# EUREKA SERVICE REGISTRY (MICROSERVICES)
# ═══════════════════════════════════════════════════════════════════════════

# Eureka Server URL
EUREKA_SERVER_URL=http://localhost:8761/eureka/

# Service Discovery Settings
EUREKA_INSTANCE_PREFER_IP=true
EUREKA_FETCH_REGISTRY=true
EUREKA_REGISTER_WITH_EUREKA=true

# ═══════════════════════════════════════════════════════════════════════════
# NOTIFICATION SERVICE SETTINGS
# ═══════════════════════════════════════════════════════════════════════════

# Retry Configuration
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY_MINUTES=5

# Batch Processing
NOTIFICATION_BATCH_SIZE=100

# Rate Limiting (requests per minute)
NOTIFICATION_RATE_LIMIT=100

# SMS Character Limits
SMS_SINGLE_LENGTH=160
SMS_CONCATENATED_LENGTH=306

# ═══════════════════════════════════════════════════════════════════════════
# WEB APPLICATION URL (for email links)
# ═══════════════════════════════════════════════════════════════════════════

WEB_APP_URL=http://localhost:3000
WEB_APP_NAME=Kwetu-Hub Uganda Platform

# ═══════════════════════════════════════════════════════════════════════════
# LOGGING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════

# Log Level (TRACE, DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG

# Log File Settings
LOG_FILE_PATH=logs/notification-service.log
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=30

# Console Log Pattern
LOG_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
LOG_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ═══════════════════════════════════════════════════════════════════════════
# MONITORING & OBSERVABILITY
# ═══════════════════════════════════════════════════════════════════════════

# Spring Boot Actuator
MANAGEMENT_ENDPOINTS_ENABLED=true
MANAGEMENT_HEALTH_SHOW_DETAILS=always

# Metrics Export
METRICS_EXPORT_ENABLED=true

# ═══════════════════════════════════════════════════════════════════════════
# SECURITY SETTINGS
# ═══════════════════════════════════════════════════════════════════════════

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://kwetuhub.ug
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type
CORS_MAX_AGE=3600

# JWT Settings (if needed)
JWT_SECRET=your_jwt_secret_key_minimum_256_bits_here
JWT_EXPIRATION=900000
JWT_REFRESH_EXPIRATION=604800000

# ═══════════════════════════════════════════════════════════════════════════
# TIMEZONE & LOCALIZATION
# ═══════════════════════════════════════════════════════════════════════════

# Application Timezone
APP_TIMEZONE=Africa/Kampala

# Supported Languages
APP_LANGUAGES=en,lg,lur,lgb
APP_DEFAULT_LANGUAGE=en

# ═══════════════════════════════════════════════════════════════════════════
# FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════════════

# Enable/Disable Features
FEATURE_SMS_ENABLED=true
FEATURE_EMAIL_ENABLED=true
FEATURE_PUSH_ENABLED=true
FEATURE_PREFERENCES_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true

# ═══════════════════════════════════════════════════════════════════════════
# TESTING & DEVELOPMENT
# ═══════════════════════════════════════════════════════════════════════════

# Test Mode (skip actual API calls in tests)
TEST_MODE=false

# Mock SMS/Email (for local development)
MOCK_SMS=false
MOCK_EMAIL=false

# Debug Mode
DEBUG_MODE=false

# ═══════════════════════════════════════════════════════════════════════════
# PRODUCTION ONLY SETTINGS
# ═══════════════════════════════════════════════════════════════════════════

# Production Flag
IS_PRODUCTION=false

# Sentry Error Tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# New Relic APM (optional)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=notification-service

# ═══════════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════