# ═══════════════════════════════════════════════════════════════════════════════
# ENTREPRENEURSHIP BOOSTER PLATFORM - MASTER ENVIRONMENT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════
#
# Version: 3.0.0 - Production Ready with PostgreSQL
# Author: Douglas Kings Kato
# Last Updated: 2025-11-15
# Platform: Multi-tenant SaaS for Youth Entrepreneurship in Uganda
#
# ═══════════════════════════════════════════════════════════════════════════════
# QUICK START GUIDE
# ═══════════════════════════════════════════════════════════════════════════════
#
# 2. GENERATE SECRETS:
#    # JWT Secret (256-bit minimum)
#    openssl rand -base64 64
#
#    # Database Password
#    openssl rand -base64 32
#
#    # Redis Password
#    openssl rand -base64 24
#
# 3. UPDATE CRITICAL VALUES (Search for <CHANGE_ME>):
#    - All passwords and API keys
#    - JWT_SECRET
#    - AFRICASTALKING credentials
#    - SMTP credentials
#    - Production URLs
#
# 4. START SERVICES:
#    # Docker Compose
#    docker-compose up -d
#
#    # Kubernetes
#    kubectl apply -f k8s/
#
#    # Manual (Maven)
#    ./mvnw spring-boot:run
#
# 5. VERIFY DEPLOYMENT:
#    - Service Registry: http://localhost:8761
#    - API Gateway: http://localhost:8080
#    - Health Check: http://localhost:8080/actuator/health
#    - Swagger UI: http://localhost:8080/swagger-ui.html
#
# ═══════════════════════════════════════════════════════════════════════════════
# SECURITY WARNINGS
# ═══════════════════════════════════════════════════════════════════════════════
#
# ⚠️  NEVER commit .env files to version control
# ⚠️  Use secrets manager in production (AWS Secrets Manager, HashiCorp Vault)
# ⚠️  Rotate all secrets every 90 days
# ⚠️  Set file permissions: chmod 600 .env
# ⚠️  Use different credentials for dev/staging/production
# ⚠️  Enable SSL/TLS in production
# ⚠️  Change ALL default passwords before deployment
#
# ═══════════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 1: GLOBAL APPLICATION SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

# Environment Configuration
# Options: development | staging | production
ENVIRONMENT=development
SPRING_PROFILES_ACTIVE=dev
APP_ENV=development

# Application Identity
APP_NAME=Entrepreneurship Booster Platform
APP_VERSION=3.0.0
COMPOSE_PROJECT_NAME=epb-platform

# Timezone & Localization
TZ=Africa/Kampala
APP_TIMEZONE=Africa/Kampala
APP_DEFAULT_LANGUAGE=en
APP_SUPPORTED_LANGUAGES=en,lg,lur,lgb

# Base URLs - Development
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:8080
API_GATEWAY_URL=http://localhost:8080

# Base URLs - Production (Update before deploying)
# FRONTEND_URL=https://entrepreneurshipbooster.ug
# BACKEND_URL=https://api.entrepreneurshipbooster.ug
# API_GATEWAY_URL=https://api.entrepreneurshipbooster.ug
# APP_DOMAIN=entrepreneurshipbooster.ug

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 2: POSTGRESQL DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# PostgreSQL Server
POSTGRES_IMAGE=postgres:15-alpine
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Master Credentials
# ⚠️ CRITICAL: Change in production!
# Password Requirements: Min 16 chars, uppercase, lowercase, numbers, special chars
POSTGRES_USER=epb_admin
POSTGRES_PASSWORD=<CHANGE_ME_STRONG_DB_ROOT_PASSWORD>
DB_ADMIN_USER=postgres
DB_ADMIN_PASSWORD=<CHANGE_ME_STRONG_ADMIN_PASSWORD>

# Application Database User (Restricted Permissions)
DB_USER=epb_app_user
DB_APP_USER=epb_app_user
DB_PASSWORD=<CHANGE_ME_STRONG_APP_PASSWORD>
DB_APP_PASSWORD=<CHANGE_ME_STRONG_APP_PASSWORD>

# Dedicated Databases (One per Microservice)
# Auto-created by init-databases.sql script
POSTGRES_DB_AUTH=epb_auth
POSTGRES_DB_USER=epb_user
POSTGRES_DB_JOB=epb_job
POSTGRES_DB_OPPORTUNITY=epb_opportunity
POSTGRES_DB_MENTOR=epb_mentor
POSTGRES_DB_CONTENT=epb_content
POSTGRES_DB_NOTIFICATION=epb_notification
POSTGRES_DB_FILE=epb_file
POSTGRES_DB_AI=epb_ai
POSTGRES_DB_ANALYTICS=epb_analytics
POSTGRES_DB_USSD=epb_ussd
POSTGRES_DB_EDGE=epb_edge

# Legacy Database Names (For backward compatibility)
DB_AUTH=epb_auth
DB_USER=epb_user
DB_JOB=epb_job
DB_OPPORTUNITY=epb_opportunity
DB_MENTOR=epb_mentor
DB_CONTENT=epb_content
DB_NOTIFICATION=epb_notification
DB_FILE=epb_file
DB_AI=epb_ai
DB_ANALYTICS=epb_analytics
DB_USSD=epb_ussd

# Connection Pool Configuration
DB_MAX_POOL_SIZE=20
DB_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# SSL/TLS Configuration (Enable in production)
DB_SSL_ENABLED=false
DB_SSL_MODE=prefer
# Options: disable | allow | prefer | require | verify-ca | verify-full

# Hibernate/JPA Settings
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 3: REDIS CACHE & SESSION MANAGEMENT
# ═══════════════════════════════════════════════════════════════════════════════

# Redis Server
REDIS_IMAGE=redis:7-alpine
REDIS_HOST=localhost
REDIS_PORT=6379

# Redis Authentication
# Leave empty for development
# ⚠️ REQUIRED in production
REDIS_PASSWORD=<CHANGE_ME_STRONG_REDIS_PASSWORD>

# Redis Configuration
REDIS_MAXMEM=512mb
REDIS_DATABASE=0
REDIS_TIMEOUT=2000

# Database Indexes (0-15)
REDIS_CACHE_DATABASE=1
REDIS_SESSION_DATABASE=2

# Connection Pool
REDIS_MAX_ACTIVE=20
REDIS_MAX_IDLE=10
REDIS_MIN_IDLE=5
REDIS_MAX_WAIT=-1

# Cache Configuration
CACHE_TYPE=redis
CACHE_REDIS_TIME_TO_LIVE=3600000
CACHE_CACHE_NAMES=userProfiles,authData,opportunities,searchResults,mentors,jobs

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 4: JWT (JSON WEB TOKEN) SECURITY
# ═══════════════════════════════════════════════════════════════════════════════

# ⚠️ CRITICAL: Generate strong secret (minimum 256 bits / 32 bytes)
#
# Generate Command:
#   openssl rand -base64 64
#   node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
#
# Production: Load from AWS Secrets Manager or HashiCorp Vault
JWT_SECRET=<CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_64>

# JWT Token Configuration
JWT_ISSUER=epb-platform
JWT_AUDIENCE=epb-users
JWT_ACCESS_TOKEN_EXPIRY=900
JWT_REFRESH_TOKEN_EXPIRY=604800

# JWT Header Settings
JWT_HEADER=Authorization
JWT_PREFIX=Bearer

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 5: EUREKA SERVICE REGISTRY
# ═══════════════════════════════════════════════════════════════════════════════

# Service Discovery
EUREKA_ENABLED=true
EUREKA_HOST=localhost
EUREKA_PORT=8761

# Eureka URL (Auto-constructed)
EUREKA_URL=http://${EUREKA_HOST}:${EUREKA_PORT}/eureka/

# Eureka Authentication
# ⚠️ CRITICAL: Change in production!
EUREKA_ADMIN_USER=admin
EUREKA_ADMIN_PASSWORD=<CHANGE_ME_STRONG_EUREKA_PASSWORD>
EUREKA_USERNAME=admin
EUREKA_PASSWORD=<CHANGE_ME_STRONG_EUREKA_PASSWORD>

# Eureka Instance Configuration
EUREKA_HOSTNAME=localhost
EUREKA_INSTANCE_PREFER_IP_ADDRESS=true

# Heartbeat Settings
EUREKA_INSTANCE_LEASE_RENEWAL_INTERVAL=30
EUREKA_INSTANCE_LEASE_EXPIRATION_DURATION=90

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 6: MICROSERVICE PORTS
# ═══════════════════════════════════════════════════════════════════════════════

# Core Infrastructure
SERVICE_REGISTRY_PORT=8761
API_GATEWAY_PORT=8080

# Business Services
AUTH_SERVICE_PORT=8082
USER_SERVICE_PORT=8081
JOB_SERVICE_PORT=8085
OPPORTUNITY_SERVICE_PORT=8083
MENTOR_SERVICE_PORT=8087
CONTENT_SERVICE_PORT=8084

# Support Services
NOTIFICATION_SERVICE_PORT=8086
FILE_MANAGEMENT_SERVICE_PORT=8088
AI_RECOMMENDATION_SERVICE_PORT=8089
ANALYTICS_SERVICE_PORT=8090
USSD_SERVICE_PORT=8092
EDGE_FUNCTIONS_PORT=8091

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 7: AFRICA'S TALKING API (SMS & USSD)
# ═══════════════════════════════════════════════════════════════════════════════

# Get credentials from: https://account.africastalking.com/apps

# Sandbox (Development/Testing)
AFRICASTALKING_USERNAME=sandbox
AFRICASTALKING_API_KEY=<CHANGE_ME_YOUR_SANDBOX_API_KEY>
AFRICASTALKING_ENVIRONMENT=sandbox

# Production
# AFRICASTALKING_USERNAME=YouthConnect
# AFRICASTALKING_API_KEY=<CHANGE_ME_YOUR_PRODUCTION_API_KEY>
# AFRICASTALKING_ENVIRONMENT=production

# SMS Configuration
AFRICASTALKING_SENDER_ID=EPB
AFRICAS_TALKING_SENDER_ID=EPB
AFRICAS_TALKING_BASE_URL=https://api.africastalking.com/version1
SMS_COST_UGX=60

# USSD Configuration
USSD_SHORT_CODE=*256#
AFRICASTALKING_USSD_CODE=*256#
USSD_SERVICE_CODE=*256#
USSD_TIMEOUT_SECONDS=180

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 8: TWILIO (ALTERNATIVE SMS PROVIDER)
# ═══════════════════════════════════════════════════════════════════════════════

# Twilio Credentials (Optional)
TWILIO_ACCOUNT_SID=<CHANGE_ME_YOUR_TWILIO_SID>
TWILIO_AUTH_TOKEN=<CHANGE_ME_YOUR_TWILIO_AUTH_TOKEN>
TWILIO_PHONE_NUMBER=+1234567890

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 9: EMAIL CONFIGURATION (SMTP)
# ═══════════════════════════════════════════════════════════════════════════════

# SMTP Server (Gmail Example)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# SMTP Authentication
# For Gmail: Use App Password (https://myaccount.google.com/apppasswords)
SMTP_USERNAME=noreply@entrepreneurshipbooster.ug
SMTP_PASSWORD=<CHANGE_ME_YOUR_SMTP_APP_PASSWORD>

# Email Sender Identity
SMTP_FROM=noreply@entrepreneurshipbooster.ug
SMTP_FROM_NAME=Entrepreneurship Booster Platform
EMAIL_FROM_NAME=EPB Team
EMAIL_FROM_ADDRESS=noreply@entrepreneurshipbooster.ug
EMAIL_REPLY_TO=support@entrepreneurshipbooster.ug

# SMTP Security
SMTP_AUTH=true
SMTP_STARTTLS_ENABLE=true
SMTP_STARTTLS_REQUIRED=true
SMTP_SSL_TRUST=smtp.gmail.com
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_REQUIRED=true

# Email Templates
EMAIL_TEMPLATES_PATH=classpath:/templates/email

# SendGrid API (Alternative)
SENDGRID_API_KEY=<CHANGE_ME_YOUR_SENDGRID_API_KEY>
SENDGRID_FROM_EMAIL=noreply@entrepreneurshipbooster.ug
SENDGRID_FROM_NAME=EPB Team

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 10: FIREBASE (PUSH NOTIFICATIONS)
# ═══════════════════════════════════════════════════════════════════════════════

# Firebase Project
# Get credentials from: https://console.firebase.google.com
FIREBASE_PROJECT_ID=entrepreneurship-booster-ug
FIREBASE_DATABASE_URL=https://entrepreneurship-booster-ug.firebaseio.com

# Service Account Key File
# Download from: Firebase Console > Project Settings > Service Accounts
# Place in: src/main/resources/firebase-service-account.json
FIREBASE_SERVICE_ACCOUNT=firebase-service-account.json

# Push Notification Settings
PUSH_NOTIFICATION_ENABLED=true
PUSH_HIGH_PRIORITY=true
PUSH_TTL_SECONDS=86400

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 11: FILE STORAGE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Storage Backend
# Options: LOCAL | S3 | MINIO
STORAGE_TYPE=LOCAL
STORAGE_PATH=/app/uploads
APP_UPLOAD_DIR=./uploads

# File Size Limits (bytes)
FILE_MAX_SIZE=52428800
MAX_FILE_SIZE=10485760
MAX_REQUEST_SIZE=15728640

# Allowed MIME Types
FILE_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Base URL
BASE_URL=http://localhost:8088

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 12: AWS S3 CONFIGURATION (If STORAGE_TYPE=S3)
# ═══════════════════════════════════════════════════════════════════════════════

# AWS Credentials
AWS_ACCESS_KEY_ID=<CHANGE_ME_YOUR_AWS_ACCESS_KEY>
AWS_SECRET_ACCESS_KEY=<CHANGE_ME_YOUR_AWS_SECRET_KEY>

# S3 Configuration
AWS_REGION=us-east-1
AWS_S3_BUCKET=epb-uploads
BACKUP_S3_BUCKET=epb-backups

# CloudFront CDN (Optional)
AWS_CLOUDFRONT_URL=https://cdn.entrepreneurshipbooster.ug

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 13: AI/ML CONFIGURATION (OPENAI)
# ═══════════════════════════════════════════════════════════════════════════════

# OpenAI API
OPENAI_API_KEY=<CHANGE_ME_YOUR_OPENAI_API_KEY>
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 14: OAUTH2 PROVIDERS (OPTIONAL)
# ═══════════════════════════════════════════════════════════════════════════════

# Google OAuth2
GOOGLE_CLIENT_ID=<CHANGE_ME_YOUR_GOOGLE_CLIENT_ID>
GOOGLE_CLIENT_SECRET=<CHANGE_ME_YOUR_GOOGLE_CLIENT_SECRET>

# Facebook OAuth2
FACEBOOK_APP_ID=<CHANGE_ME_YOUR_FACEBOOK_APP_ID>
FACEBOOK_APP_SECRET=<CHANGE_ME_YOUR_FACEBOOK_APP_SECRET>

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 15: CORS CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Allowed Origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:19006,https://entrepreneurshipbooster.ug

# CORS Settings
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 16: RATE LIMITING
# ═══════════════════════════════════════════════════════════════════════════════

# Global Rate Limits
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=60

# Endpoint-Specific Limits
RATE_LIMIT_AUTH_REQUESTS=20
RATE_LIMIT_AUTH_DURATION=60

RATE_LIMIT_LOGIN_REQUESTS=5
RATE_LIMIT_LOGIN_DURATION=60

RATE_LIMIT_REGISTER_REQUESTS=3
RATE_LIMIT_REGISTER_DURATION=300

RATE_LIMIT_PASSWORD_RESET_REQUESTS=2
RATE_LIMIT_PASSWORD_RESET_DURATION=600

RATE_LIMIT_UPLOAD_REQUESTS=10
RATE_LIMIT_UPLOAD_DURATION=60

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 17: LOGGING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Log Levels
LOG_LEVEL=INFO
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG

# Log File Configuration
LOG_PATH=./logs
LOG_FILE_NAME=application.log
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=30

# Log Patterns
LOG_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
LOG_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 18: MONITORING & OBSERVABILITY
# ═══════════════════════════════════════════════════════════════════════════════

# Spring Boot Actuator
MANAGEMENT_ENDPOINTS_ENABLED=true
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus,flyway
MANAGEMENT_HEALTH_SHOW_DETAILS=always
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when_authorized

# Health Checks
MANAGEMENT_HEALTH_DB_ENABLED=true
MANAGEMENT_HEALTH_REDIS_ENABLED=true
MANAGEMENT_HEALTH_DISKSPACE_ENABLED=true

# Metrics
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true
METRICS_EXPORT_ENABLED=true
PROMETHEUS_ENABLED=true

# Prometheus & Grafana
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=30d
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=<CHANGE_ME_STRONG_GRAFANA_PASSWORD>

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 19: SECURITY SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

# Account Lockout
SECURITY_ACCOUNT_LOCKOUT_ENABLED=true
SECURITY_ACCOUNT_LOCKOUT_ATTEMPTS=5
SECURITY_ACCOUNT_LOCKOUT_DURATION=1800

# Password Policy
SECURITY_PASSWORD_MIN_LENGTH=8
SECURITY_PASSWORD_REQUIRE_UPPERCASE=true
SECURITY_PASSWORD_REQUIRE_LOWERCASE=true
SECURITY_PASSWORD_REQUIRE_DIGIT=true
SECURITY_PASSWORD_REQUIRE_SPECIAL=true

# Session Management
SESSION_TIMEOUT=1800
SECURITY_SESSION_TIMEOUT=3600
SECURITY_CONCURRENT_SESSIONS=3

# SSL/TLS Configuration (Production)
SERVER_SSL_ENABLED=false
# SERVER_SSL_KEY_STORE=classpath:keystore.p12
# SERVER_SSL_KEY_STORE_PASSWORD=<CHANGE_ME>
# SERVER_SSL_KEY_STORE_TYPE=PKCS12

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 20: FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════════════════

# Notification Channels
FEATURE_SMS_ENABLED=true
FEATURE_EMAIL_ENABLED=true
FEATURE_PUSH_ENABLED=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_PUSH_NOTIFICATIONS=false

# Core Features
FEATURE_USSD_ENABLED=true
FEATURE_USSD_ACCESS=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_ANALYTICS=true
FEATURE_AI_RECOMMENDATIONS_ENABLED=true
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_FILE_UPLOADS=true
FEATURE_MENTORSHIP=true

# Notification Preferences
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SMS_ENABLED=true
NOTIFICATION_PUSH_ENABLED=false

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 21: PAGINATION & DEFAULTS
# ═══════════════════════════════════════════════════════════════════════════════

APP_PAGINATION_DEFAULT_PAGE_SIZE=20
APP_PAGINATION_MAX_PAGE_SIZE=100
APP_ZONE=default

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 22: RESILIENCE PATTERNS
# ═══════════════════════════════════════════════════════════════════════════════

# Retry Configuration
RETRY_MAX_ATTEMPTS=3
RETRY_WAIT_DURATION=500

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_RATE_THRESHOLD=50
CIRCUIT_BREAKER_WAIT_DURATION=10000

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 23: FLYWAY DATABASE MIGRATION
# ═══════════════════════════════════════════════════════════════════════════════

FLYWAY_ENABLED=true
FLYWAY_BASELINE_ON_MIGRATE=true
FLYWAY_VALIDATE_ON_MIGRATE=true
FLYWAY_CLEAN_DISABLED=true
FLYWAY_OUT_OF_ORDER=false

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 24: JVM TUNING
# ═══════════════════════════════════════════════════════════════════════════════

JAVA_XMS=512m
JAVA_XMX=1g
JAVA_MAX_METASPACE=256m

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 25: BACKUP CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_CRON=0 2 * * *

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 26: NGINX REVERSE PROXY
# ═══════════════════════════════════════════════════════════════════════════════

NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 27: TESTING & DEVELOPMENT
# ═══════════════════════════════════════════════════════════════════════════════

# Test Mode
TEST_MODE=false
DEBUG_MODE=false

# Mock External Services
MOCK_SMS=false
MOCK_EMAIL=false
MOCK_PUSH=false

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 28: DOCKER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

DOCKER_NETWORK=epb-network

# ═══════════════════════════════════════════════════════════════════════════════
# SECTION 29: PRODUCTION-SPECIFIC SETTINGS (COMMENTED)
# ═══════════════════════════════════════════════════════════════════════════════

# Uncomment and configure for production deployment

# Production Flag
# IS_PRODUCTION=true
# ENVIRONMENT=production
# SPRING_PROFILES_ACTIVE=production
# APP_ENV=production

# Production Database
# DB_HOST=postgres.production.rds.amazonaws.com
# DB_PORT=5432
# DB_ADMIN_PASSWORD=<load-from-secrets-manager>
# DB_APP_PASSWORD=<load-from-secrets-manager>
# DB_SSL_ENABLED=true
# DB_SSL_MODE=require

# Production Redis
# REDIS_HOST=redis.production.cache.amazonaws.com
# REDIS_PORT=6379
# REDIS_PASSWORD=<load-from-secrets-manager>

# Production URLs
# FRONTEND_URL=https://entrepreneurshipbooster.ug
# BACKEND_URL=https://api.entrepreneurshipbooster.ug
# API_GATEWAY_URL=https://api.entrepreneurshipbooster.ug
# APP_DOMAIN=entrepreneurshipbooster.ug

# Production CORS
# CORS_ALLOWED_ORIGINS=https://entrepreneurshipbooster.ug,https://www.entrepreneurshipbooster.ug

# Production Storage (S3)
# STORAGE_TYPE=S3
# STORAGE_PATH=s3://epb-uploads/
# BASE_URL=https://files.entrepreneurshipbooster.ug

# Production Logging
# LOG_LEVEL_ROOT=WARN
# LOG_LEVEL_APP=INFO

# Production Monitoring
# SENTRY_DSN=<CHANGE_ME_YOUR_SENTRY_DSN>
# SENTRY_ENVIRONMENT=production
# NEW_RELIC_LICENSE_KEY=<CHANGE_ME_YOUR_NEW_RELIC_KEY>
# NEW_RELIC_APP_NAME=epb-platform

# ═══════════════════════════════════════════════════════════════════════════════
# PRE-DEPLOYMENT CHECKLIST
# ═══════════════════════════════════════════════════════════════════════════════
#
# SECURITY (CRITICAL):
# ☐ Change all passwords and API keys marked with <CHANGE_ME>
# ☐ Generate strong JWT_SECRET (64+ chars): openssl rand -base64 64
# ☐ Use unique passwords for each service (DB, Redis, Eureka, etc.)
# ☐ Enable SSL/TLS certificates
# ☐ Restrict CORS to production domains only
# ☐ Set SPRING_JPA_HIBERNATE_DDL_AUTO=validate
# ☐ Set SPRING_PROFILES_ACTIVE=production
# ☐ Configure firewall rules (allow only necessary ports)
# ☐ Use secrets manager (AWS Secrets Manager, Vault, K8s Secrets)
# ☐ Set file permissions: chmod 600 .env
#
# API CREDENTIALS:
# ☐ Update Africa's Talking production credentials
# ☐ Configure production SMTP/SendGrid credentials
# ☐ Set up Firebase project and download service account
# ☐ Configure AWS S3 for file storage
# ☐ Update OpenAI API key
# ☐ Configure OAuth2 providers (Google, Facebook)
#
# INFRASTRUCTURE:
# ☐ Set up PostgreSQL (RDS or managed service)
# ☐ Configure Redis (ElastiCache or managed service)
# ☐ Set up monitoring (Prometheus, Grafana)
# ☐ Configure backup automation
# ☐ Set up CDN for static assets
# ☐ Configure load balancer
#
# MONITORING & OBSERVABILITY:
# ☐ Enable health checks
# ☐ Configure log aggregation (ELK, CloudWatch)
# ☐ Set up alerting (PagerDuty, Slack)
# ☐ Enable APM (New Relic, Datadog)
# ☐ Configure uptime monitoring
#
# TESTING:
# ☐ Run integration tests
# ☐ Perform load testing
# ☐ Security audit (OWASP Top 10)
# ☐ Penetration testing
# ☐ DR (Disaster Recovery) testing
#
# DOCUMENTATION:
# ☐ Update API documentation
# ☐ Document deployment process
# ☐ Create runbook for common issues
# ☐ Update architecture diagrams
