# ═══════════════════════════════════════════════════════════════════════════
# API GATEWAY - Environment Variables Template
# .env.example
# ═══════════════════════════════════════════════════════════════════════════

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
SPRING_APPLICATION_NAME=api-gateway
SERVER_PORT=8088
SPRING_PROFILES_ACTIVE=dev

# =============================================================================
# EUREKA SERVICE REGISTRY
# =============================================================================
EUREKA_HOST=localhost
EUREKA_PORT=8761
EUREKA_USERNAME=admin
EUREKA_PASSWORD=changeme

# Full Eureka URL (constructed from above)
EUREKA_SERVER_URL=http://${EUREKA_USERNAME}:${EUREKA_PASSWORD}@${EUREKA_HOST}:${EUREKA_PORT}/eureka/

# =============================================================================
# JWT AUTHENTICATION
# ⚠️ CRITICAL: Must match the secret used by auth-service!
# Minimum 256 bits (32 characters) required for HS256 algorithm
# =============================================================================
JWT_SECRET=youth-connect-secure-secret-key-2025-minimum-256-bits-required-for-production
JWT_EXPIRATION=86400000

# JWT Issuer (optional, for additional validation)
JWT_ISSUER=youth-connect-uganda

# =============================================================================
# CORS CONFIGURATION
# Add your frontend URLs here (comma-separated, no spaces)
# =============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:19006,https://youthconnect.ug,https://www.youthconnect.ug
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_MAX_AGE=3600

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_CAPACITY=150
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=20
RATE_LIMIT_USSD_REQUESTS_PER_MINUTE=50
RATE_LIMIT_FILE_UPLOAD_REQUESTS_PER_MINUTE=20
RATE_LIMIT_FILE_DOWNLOAD_REQUESTS_PER_MINUTE=100

# =============================================================================
# CIRCUIT BREAKER CONFIGURATION
# =============================================================================
CIRCUIT_BREAKER_FAILURE_RATE_THRESHOLD=50
CIRCUIT_BREAKER_WAIT_DURATION_OPEN_STATE=10s
CIRCUIT_BREAKER_SLIDING_WINDOW_SIZE=10
CIRCUIT_BREAKER_MINIMUM_NUMBER_OF_CALLS=5

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================
GATEWAY_CONNECT_TIMEOUT=10000
GATEWAY_RESPONSE_TIMEOUT=120s
GATEWAY_HTTP_CLIENT_MAX_CONNECTIONS=500

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
SPRING_SERVLET_MULTIPART_ENABLED=true
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=50MB
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=100MB
SPRING_SERVLET_MULTIPART_FILE_SIZE_THRESHOLD=2MB

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_GATEWAY=DEBUG
LOGGING_LEVEL_RESILIENCE4J=DEBUG
LOGGING_FILE_NAME=logs/api-gateway.log
LOGGING_FILE_MAX_SIZE=10MB
LOGGING_FILE_MAX_HISTORY=30

# =============================================================================
# ACTUATOR / MONITORING
# =============================================================================
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus,gateway
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# =============================================================================
# DOCKER CONFIGURATION (when running in container)
# =============================================================================
# Uncomment and modify when deploying with Docker
# EUREKA_HOST=service-registry
# EUREKA_PORT=8761

# =============================================================================
# KUBERNETES CONFIGURATION (when deploying to K8s)
# =============================================================================
# Uncomment when deploying to Kubernetes
# EUREKA_HOST=service-registry.default.svc.cluster.local
# K8S_NAMESPACE=default

# =============================================================================
# PRODUCTION SECURITY SETTINGS
# =============================================================================
# Uncomment for production deployment
# SPRING_PROFILES_ACTIVE=prod
# SECURE_CONNECTIONS_ONLY=true
# HTTPS_PORT=8443
# SSL_KEY_STORE=/app/keystore.p12
# SSL_KEY_STORE_PASSWORD=changeme
# SSL_KEY_STORE_TYPE=PKCS12

# =============================================================================
# TRACING & DISTRIBUTED MONITORING (Optional)
# =============================================================================
# Uncomment if using distributed tracing (Zipkin/Jaeger)
# SPRING_ZIPKIN_BASE_URL=http://zipkin:9411
# SPRING_SLEUTH_SAMPLER_PROBABILITY=1.0

# =============================================================================
# REDIS CONFIGURATION (Optional - for distributed rate limiting)
# =============================================================================
# Uncomment if using Redis for distributed rate limiting
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DATABASE=0

# =============================================================================
# NOTES
# =============================================================================
# 1. Always use strong, unique passwords in production
# 2. JWT_SECRET must be at least 256 bits (32 characters)
# 3. Keep .env file secure and never commit to version control
# 4. Update CORS origins with your actual frontend URLs
# 5. Adjust rate limits based on your traffic patterns
# 6. Monitor logs and metrics regularly
# 7. Use secrets management in production (AWS Secrets Manager, Vault, etc.)